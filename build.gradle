apply plugin: 'java'

sourceCompatibility = 1.8
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
    compile 'com.google.code.gson:gson:2.2.4'

    testCompile group: 'junit', name: 'junit', version: '4.11'
}

jar {
    manifest.attributes("Main-Class": "ru.kalcho.instagram.server.WebServer")
    manifest.attributes("Class-Path": configurations.runtime.collect { it.name }.join(' '))
}

task dist(dependsOn: jar, type: Zip) {
    from jar.outputs.files
    from configurations.runtime
}

artifacts {
    archives dist
}